{% for account in accounts %}
{% set isWritableString = 'true' if account.isWritable else 'false' %}
// {{ account.titleCaseName }}{% if account.isOptional %} (optional){% endif %}.
{% if account.isOptional %}
if (accounts.{{ account.name }}) {
{% endif %}
  {% if account.isOptionalSigner %}
  if (isSigner(accounts.{{ account.name }})) {
    signers.push(accounts.{{ account.name }});
    keys.push({
      pubkey: accounts.{{ account.name }}.publicKey,
      isSigner: true,
      isWritable: {{ isWritableString }},
    });
  } else {
    keys.push({
      pubkey: accounts.{{ account.name }},
      isSigner: false,
      isWritable: {{ isWritableString }},
    });
  }
  {% elif account.isSigner  %}
  signers.push(accounts.{{ account.name }});
  keys.push({ pubkey: accounts.{{ account.name }}.publicKey, isSigner: true, isWritable: {{ isWritableString }} });
  {% else %}
  keys.push({ pubkey: accounts.{{ account.name }}, isSigner: false, isWritable: {{ isWritableString }} });
  {% endif %}
{% if account.isOptional %}
}
{% endif %}

{% endfor %}